# comics2video
Converts Comic Book files to videos, to be watched on TV/Video players.

The possibility of reading a Comic Book by watching a video allows the user to be **hands-free** (no need to hold a phone or press a button/screen to change the pages) and also allow the reading by **people with disabilities**.

### How it works
> Example using Whiz Comics #34 (1942) - Fawcett Publications (Public Domain)

![How comics2video works](./docs/images/comics2video.jpg)
Video generated by comics2video:
![Sample - Video generated by comics2video](./docs/images/comics2video.gif)


## Usage option A: For non-developers
### Installing prerequisites
1. Install the latest version of [Node.js](https://nodejs.org/en/download)
2. Download comics2video files from the repository using this link: [![Download comics2video](./docs/images/code.png)](https://github.com/MauricioPinguim/comics2video/archive/master.zip) 
3. In the extracted folder, install comics2video dependencies with the following command:

```sh
npm install
```

### Using by Drag-and-drop comic book files
**(Windows only)** Select the Comic Book file and drag-and-drop it on the batch file located in the root folder of comics2video:

> üóã drop_comics_here.bat

![Drag-and-drop file to start](./docs/images/drag_drop_process.gif)

To process multiple Comic Book files, put them in a folder and drag-and-drop the folder.

### Alternative: Using as a standalone command
Place the Comic Book files in the **comics_files** folder and run:
```sh
node comics2video
```

Or provide the path+file as a parameter:
```sh
node comics2video ./path/myComicBook.cbr
```

If the parameter is a folder, all valid files will be processed.

## Usage option B: For Node.js developers
Add comics2video to your own project using:
```sh
npm install comics2video
```
Then use:
```javascript
const Comics2video = require('comics2video');

const source = './path/myComicBook.cbr'; // File or Folder
const comicsConversion = new Comics2video(source);

comicsConversion.on('processCompleted', (data) => {
	for (const item of data.messages) {
		// Print log or check for item.messageType = 'success' 
		console.log(`${item.messageType} ‚ñ∫ ${item.message}`);
	}
});

( async () => {
	await comicsConversion.start();
})();
```

### User Parameters
When you create the Comics2video object, a second parameter can be used to set the User Parameters:

```javascript
const comicsConversion = new Comics2video(source, userParameters);
```

User Parameters fields:

| Name | How to set | Default | Description |
| --- | --- | --- | --- |
| generateVideo | boolean | true | If false, only the image frames will be generated |
| ocrEnabled | boolean | true | If false, disables OCR and uses a fixed duration in all frames
| contentProfile | string:<br/>'simple', 'complex' | 'complex' | Changes how OCR calculates each frame duration:<br/>‚Ä¢ 'simple' : Ideal for Comics for kids, art with few details<br />‚Ä¢ 'complex' : For Superhero or Comics with detailed art
| readingSpeed | string:<br/> 'slow', 'normal', 'fast' | 'normal' | Also changes how OCR calculates duration:<br/>‚Ä¢ 'slow' : Ideal for Kids or reading in foreign language<br />‚Ä¢ 'normal' : Normal reading speed<br />‚Ä¢ 'fast' : For speed reading

### Following up the conversion process
Conversions can take more than 1 minute per page, so in addition to 'processCompleted', the 'progressUpdated' Event will be triggered as the progress goes on:

```javascript
comicsConversion.on('progressUpdated', (data) => {
	console.log(data.toString());
});
```
The example above will log every single step made, which will be a lot of messages. It is preferable to use the fields in the 'data' object instead:
| Name | Description | Example value |
| --- | --- | --- |
| file | Name of the file being processd | 'myComicBook.cbr' |
| filePart | Has value only in splitted files | 'Part 1/2' |
| element | Informs if 'Images' or 'Video' is being processed | 'Video' |
| page | The page being processed | 'Page 7' |
| frame | The frame (page division) being processed | 'Frame 007-3' |
| action | The current action being  executed | 'Performing OCR' |
| percent | The completion percentage of Images ou Video generation | 75.9 |

The **.toString()** method of 'data' will combine all field values above in a single string.

## Using the generated files
For each comic book processed, a folder with the same name will be created, containing:
- The video file in .MP4 format
	- Just open it in the TV/Video player of your choice, like a regular video
- A subfolder named 'Images' with all the frames in .JPG format
	- That can also be opened in modern TVs, advance each frame/page manually using the remote control

## Project comics2video

### Dependencies
Extraction from CBR/RAR files: [unrar-promise](https://www.npmjs.com/package/unrar-promise), CBZ/ZIP files: [win-7zip](https://www.npmjs.com/package/win-7zip)+[cross-zip](https://www.npmjs.com/package/cross-unzip), PDF files: [pdfjs-dist](https://www.npmjs.com/package/pdfjs-dist), Image processing: [sharp](https://www.npmjs.com/package/sharp), OCR: [tesseract.js](https://www.npmjs.com/package/tesseract.js), Video generation: [ffmpeg-static](https://www.npmjs.com/package/ffmpeg-static)

### Next steps
- Graphical User Interface to select files and set User Parameters (for non-developers users)
- Any good suggestions you have :wink:

### Contact
:penguin: Maur√≠cio Antunes Oliveira: [mauricio_pinguim@hotmail.com](mailto:mauricio_pinguim@hotmail.com?subject=comics2video)